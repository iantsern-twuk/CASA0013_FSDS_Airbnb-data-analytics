<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CASA0013_FSDS_Airbnb_living la vida code-a</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="Group_Work_files/libs/clipboard/clipboard.min.js"></script>
<script src="Group_Work_files/libs/quarto-html/quarto.js"></script>
<script src="Group_Work_files/libs/quarto-html/popper.min.js"></script>
<script src="Group_Work_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Group_Work_files/libs/quarto-html/anchor.min.js"></script>
<link href="Group_Work_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Group_Work_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Group_Work_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Group_Work_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Group_Work_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#who-collected-the-insideairbnb-data" id="toc-who-collected-the-insideairbnb-data" class="nav-link active" data-scroll-target="#who-collected-the-insideairbnb-data">1. Who collected the InsideAirbnb data?</a></li>
  <li><a href="#why-did-they-collect-the-insideairbnb-data" id="toc-why-did-they-collect-the-insideairbnb-data" class="nav-link" data-scroll-target="#why-did-they-collect-the-insideairbnb-data">2. Why did they collect the InsideAirbnb data?</a></li>
  <li><a href="#how-did-they-collect-it" id="toc-how-did-they-collect-it" class="nav-link" data-scroll-target="#how-did-they-collect-it">3. How did they collect it?</a></li>
  <li><a href="#how-does-the-method-of-collection-q3-impact-the-completeness-andor-accuracy-of-the-insideairbnb-data-how-well-does-it-represent-the-process-it-seeks-to-study-and-what-wider-issues-does-this-raise" id="toc-how-does-the-method-of-collection-q3-impact-the-completeness-andor-accuracy-of-the-insideairbnb-data-how-well-does-it-represent-the-process-it-seeks-to-study-and-what-wider-issues-does-this-raise" class="nav-link" data-scroll-target="#how-does-the-method-of-collection-q3-impact-the-completeness-andor-accuracy-of-the-insideairbnb-data-how-well-does-it-represent-the-process-it-seeks-to-study-and-what-wider-issues-does-this-raise">4. How does the method of collection (Q3) impact the completeness and/or accuracy of the InsideAirbnb data? How well does it represent the process it seeks to study, and what wider issues does this raise?</a></li>
  <li><a href="#what-ethical-considerations-does-the-use-of-the-insideairbnb-data-raise" id="toc-what-ethical-considerations-does-the-use-of-the-insideairbnb-data-raise" class="nav-link" data-scroll-target="#what-ethical-considerations-does-the-use-of-the-insideairbnb-data-raise">5. What ethical considerations does the use of the InsideAirbnb data raise?</a></li>
  <li><a href="#with-reference-to-the-insideairbnb-data-i.e.-using-numbers-figures-maps-and-descriptive-statistics-what-does-an-analysis-of-hosts-and-the-types-of-properties-that-they-list-suggest-about-the-nature-of-airbnb-lettings-in-london" id="toc-with-reference-to-the-insideairbnb-data-i.e.-using-numbers-figures-maps-and-descriptive-statistics-what-does-an-analysis-of-hosts-and-the-types-of-properties-that-they-list-suggest-about-the-nature-of-airbnb-lettings-in-london" class="nav-link" data-scroll-target="#with-reference-to-the-insideairbnb-data-i.e.-using-numbers-figures-maps-and-descriptive-statistics-what-does-an-analysis-of-hosts-and-the-types-of-properties-that-they-list-suggest-about-the-nature-of-airbnb-lettings-in-london">6. With reference to the InsideAirbnb data (<em>i.e.</em> using numbers, figures, maps, and descriptive statistics), what does an analysis of Hosts and the types of properties that they list suggest about the nature of Airbnb lettings in London?</a></li>
  <li><a href="#drawing-on-your-previous-answers-and-supporting-your-response-with-evidence-e.g.-figures-maps-edaesda-and-simple-statistical-analysismodels-drawing-on-experience-from-e.g.-casa0007-how-could-the-insideairbnb-data-set-be-used-to-inform-the-regulation-of-short-term-lets-stl-in-london" id="toc-drawing-on-your-previous-answers-and-supporting-your-response-with-evidence-e.g.-figures-maps-edaesda-and-simple-statistical-analysismodels-drawing-on-experience-from-e.g.-casa0007-how-could-the-insideairbnb-data-set-be-used-to-inform-the-regulation-of-short-term-lets-stl-in-london" class="nav-link" data-scroll-target="#drawing-on-your-previous-answers-and-supporting-your-response-with-evidence-e.g.-figures-maps-edaesda-and-simple-statistical-analysismodels-drawing-on-experience-from-e.g.-casa0007-how-could-the-insideairbnb-data-set-be-used-to-inform-the-regulation-of-short-term-lets-stl-in-london">7. Drawing on your previous answers, and supporting your response with evidence (<em>e.g.</em> figures, maps, EDA/ESDA, and simple statistical analysis/models drawing on experience from, e.g., CASA0007), how <em>could</em> the InsideAirbnb data set be used to inform the regulation of Short-Term Lets (STL) in London?</a></li>
  <li><a href="#sustainable-authorship-tools" id="toc-sustainable-authorship-tools" class="nav-link" data-scroll-target="#sustainable-authorship-tools">Sustainable Authorship Tools</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="../Group_Work.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CASA0013_FSDS_Airbnb_living la vida code-a</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="who-collected-the-insideairbnb-data" class="level2">
<h2 class="anchored" data-anchor-id="who-collected-the-insideairbnb-data">1. Who collected the InsideAirbnb data?</h2>
<div class="duedate">
<p>( 2 points; Answer due Week 7 )</p>
</div>
<p>Prior to 2015, the InsideAirbnb (IA) data (going back to 2013) was collected by Tom Slee. From early 2015, the IA data was (and continues to be) collected by founder Murray Cox, an Australian community and data activist, together with a team of collaborators and advisors comprising artists, activists, researchers, and data scientists <span class="citation" data-cites="insideairbnb">(<a href="#ref-insideairbnb" role="doc-biblioref"><span>“Inside airbnb,”</span> n.d.</a>)</span>.</p>
</section>
<section id="why-did-they-collect-the-insideairbnb-data" class="level2">
<h2 class="anchored" data-anchor-id="why-did-they-collect-the-insideairbnb-data">2. Why did they collect the InsideAirbnb data?</h2>
<div class="duedate">
<p>( 4 points; Answer due Week 7 )</p>
<p>IA data seeks to challenge official data from Airbnb, which may be misrepresentative of its operations and impact <span class="citation" data-cites="slee_2016">(<a href="#ref-slee_2016" role="doc-biblioref">Slee and Cox, 2016</a>)</span>. It offers an alternative perspective to Airbnb’s (limited) publicly available data by purposefully representing it through datasets and visualisations, with the not-for-profit goal of helping cities and communities to make informed decisions concerning Airbnb’s operations <span class="citation" data-cites="insideairbnb">(<a href="#ref-insideairbnb" role="doc-biblioref"><span>“Inside airbnb,”</span> n.d.</a>)</span>. In doing so, IA increases data accessibility on Airbnb’s impacts on residential neighbourhoods worldwide, especially with regard to quantifying the ramifications of short-term lets <span class="citation" data-cites="wang_2024">(<a href="#ref-wang_2024" role="doc-biblioref">Wang <em>et al.</em>, 2024</a>)</span> on local communities.</p>
</div>
<p>One of way to embed output in the text looks like this: after cleaning, we were left with 85,127 rows of data.</p>
<p>This way is also supposed to work (<code>{python} f"{df.shape[0]:,}"</code>) but I’ve found it less reliable.</p>
<div id="a3323271" class="cell" data-execution_count="4">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-5-output-1.png" width="623" height="411" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="how-did-they-collect-it" class="level2">
<h2 class="anchored" data-anchor-id="how-did-they-collect-it">3. How did they collect it?</h2>
<div class="duedate">
<p>( 5 points; Answer due Week 8 )</p>
</div>
<p>The IA data is collected through a process known as web-scraping, in which automated software repeatedly visits the Airbnb website and extracts publicly-available data from each listing, such as description, location, and room or property type <span class="citation" data-cites="prentice_2023">(<a href="#ref-prentice_2023" role="doc-biblioref">Prentice and Pawlicz, 2023</a>)</span>). The Python code used to scrape the data is available to the public on Github but has not been updated since 2019 <span class="citation" data-cites="alsudais_2021">(<a href="#ref-alsudais_2021" role="doc-biblioref">Alsudais, 2021</a>)</span>, meaning it is not possible to know exactly how the data are processed. However, IA does not merely scrape website data, but also processes these and augments them with assumptions about their nature <span class="citation" data-cites="insideairbnb">(<a href="#ref-insideairbnb" role="doc-biblioref"><span>“Inside airbnb,”</span> n.d.</a>)</span>. These approaches will be discussed further below.</p>
</section>
<section id="how-does-the-method-of-collection-q3-impact-the-completeness-andor-accuracy-of-the-insideairbnb-data-how-well-does-it-represent-the-process-it-seeks-to-study-and-what-wider-issues-does-this-raise" class="level2">
<h2 class="anchored" data-anchor-id="how-does-the-method-of-collection-q3-impact-the-completeness-andor-accuracy-of-the-insideairbnb-data-how-well-does-it-represent-the-process-it-seeks-to-study-and-what-wider-issues-does-this-raise">4. How does the method of collection (Q3) impact the completeness and/or accuracy of the InsideAirbnb data? How well does it represent the process it seeks to study, and what wider issues does this raise?</h2>
<div class="duedate">
<p>( 11 points; Answer due Week 9 )</p>
</div>
<p>As a scrape of Airbnb’s website rather than the raw data themselves, the final IA datasets have potential biases and quality issues that should be taken into account by analysts and legislators using them to inform policy. Web-scraping only extracts publicly-available information on Airbnb’s website at the time the script is run: this means it cannot capture deleted listings or exact listing locations, as Airbnb anonymises these for privacy reasons <span class="citation" data-cites="prentice_2023">(<a href="#ref-prentice_2023" role="doc-biblioref">Prentice and Pawlicz, 2023</a>)</span>. In addition, Airbnb’s website does not differentiate between when listings are booked or blocked by their host <span class="citation" data-cites="crommelin_2018">(<a href="#ref-crommelin_2018" role="doc-biblioref">Crommelin <em>et al.</em>, 2018</a>)</span>, meaning IA has to use review counts to roughly estimate occupancy rates. However, the process of scraping and processing by IA itself also introduces uncertainty. The web scrapes’ reservation query settings affect the data retrieved, meaning listings may be undercounted if they do not match the search’s parameters <span class="citation" data-cites="prentice_2023">(<a href="#ref-prentice_2023" role="doc-biblioref">Prentice and Pawlicz, 2023</a>)</span>. Furthermore, <span class="citation" data-cites="alsudais_2021">Alsudais (<a href="#ref-alsudais_2021" role="doc-biblioref">2021</a>)</span> found inaccuracies in the way IA had joined reviews and listing IDs.</p>
<p>Moreover, it is important to remember that Airbnb’s raw data is not necessarily accurate in the first place. Some listings may be fake, duplicates, or inactive <span class="citation" data-cites="adamiak_2022">(<a href="#ref-adamiak_2022" role="doc-biblioref">Adamiak, 2022</a>)</span>. Finally, the IA data cannot capture short-term letting (STL) transactions through other platforms <span class="citation" data-cites="prentice_2023">(<a href="#ref-prentice_2023" role="doc-biblioref">Prentice and Pawlicz, 2023</a>)</span>. This raises the question of whether IA data alone can provide a holistic understanding of the STL market.</p>
</section>
<section id="what-ethical-considerations-does-the-use-of-the-insideairbnb-data-raise" class="level2">
<h2 class="anchored" data-anchor-id="what-ethical-considerations-does-the-use-of-the-insideairbnb-data-raise">5. What ethical considerations does the use of the InsideAirbnb data raise?</h2>
<div class="duedate">
<p>( 18 points; Answer due <strong>?var:assess.group-date</strong> )</p>
</div>
<p>The use of InsideAirbnb data raises a few ethical concerns due to the collection of the data through web scraping. Using an ethics framework developed by <span class="citation" data-cites="krotov_2020">Krotov, Johnson and Silva (<a href="#ref-krotov_2020" role="doc-biblioref">2020</a>)</span> in their paper, the ethical concerns of web scraping Airbnb’s data can be categorised into infringement of individual and organisational privacy, rights of research subjects, data quality and discrimination. These categories are very applicable and in the case of IA, researchers should always be aware of identifying possible harm to individuals, organisations and enact precautionary measures to avoid these harms.</p>
<p>Infringement of individual privacy and rights to research subjects are perhaps some of the most significant ethical concerns while using the IA dataset. Since web scraping involves extracting all possible data from a website before parsing and classifying them, these data may unintentionally infringe on users’ privacy as all web activities of individuals can be extracted, revealed and may be a means of personal identification in the future <span class="citation" data-cites="zook_2017">(<a href="#ref-zook_2017" role="doc-biblioref">Zook <em>et al.</em>, 2017</a>)</span>. The IA dataset covers users reviews with their first name, duration of stay, neighbourhood, and comments recorded. Although full names and exact locations are anonymised by Airbnb, details of user reviews may reveal more about their daily lives and can risk being re-identified with generative models <span class="citation" data-cites="rocher_2019">(<a href="#ref-rocher_2019" role="doc-biblioref">Rocher, Hendrickx and Montjoye, 2019</a>)</span>. Even if personal privacy is not harmed, users may not have given permission to researchers for the use of their data, infringing on rights of research subjects. This requires additional steps to protect anonymity of subjects by deleting identifiable information or detaching unique keys from the dataset <span class="citation" data-cites="kohlmayer_2019">(<a href="#ref-kohlmayer_2019" role="doc-biblioref">Kohlmayer, Lautenschläger and Prasser, 2019</a>)</span>.</p>
<p>Airbnb’s privacy may also be compromised through web scraping since their listing data embedded were not meant to be revealed entirely to the public. This may lead to confidential operations of the company being leaked including market share, intended audiences and other trade secrets which can be maliciously used by competitors. For example, Uber was accused of using web scraping to conduct surveillance on its drivers and its competitors <span class="citation" data-cites="rosenblatt_2017">(<a href="#ref-rosenblatt_2017" role="doc-biblioref">Rosenblatt, 2017</a>)</span>.</p>
</section>
<section id="with-reference-to-the-insideairbnb-data-i.e.-using-numbers-figures-maps-and-descriptive-statistics-what-does-an-analysis-of-hosts-and-the-types-of-properties-that-they-list-suggest-about-the-nature-of-airbnb-lettings-in-london" class="level2">
<h2 class="anchored" data-anchor-id="with-reference-to-the-insideairbnb-data-i.e.-using-numbers-figures-maps-and-descriptive-statistics-what-does-an-analysis-of-hosts-and-the-types-of-properties-that-they-list-suggest-about-the-nature-of-airbnb-lettings-in-london">6. With reference to the InsideAirbnb data (<em>i.e.</em> using numbers, figures, maps, and descriptive statistics), what does an analysis of Hosts and the types of properties that they list suggest about the nature of Airbnb lettings in London?</h2>
<div class="duedate">
<p>( 15 points; Answer due <strong>?var:assess.group-date</strong> )</p>
</div>
<p><strong>Room types</strong> Firstly, analysing the categories of Airbnb listing types reveals that the nature of room types available has changed over time. Looking at room type data from 2021 to 2024, we identified a rise in the proportion of listings that were entire homes (as opposed to single-room listings) from around 55% of total listings in 2021 to 64% in 2024. This suggests an overall shift in Airbnb activity: that there is increasing demand from tenants to rent entire-home Airbnbs, and that more hosts are listing entire homes to meet that demand, deviating from Airbnb’s claims to a “sharing economy” (Minton, 2023). Subsequently, an exploration of where in London this change is occurring most significantly reveals that entire-home listings remain predominant in central London but have steadily expanded outwards over the years.</p>
<p>&lt; Figure: Map showing density of entire-home listings MSOA , 2021 vs 2022 vs 2023 vs 2024 &gt;</p>
<p><strong>Multiple-listing hosts</strong> Equally noteworthy is an analysis of multiple-listing hosts (hosts with more than 1 room/home listed). As IA notes, multiple listings are associated with commercial hosts (Inside Airbnb, 2024), who often escape housing and land-use policies and taxation applicable to traditional landlords (Wachsmuth &amp; Weisler, 2018) and thus warrant greater scrutiny. Our analysis of the proportions of hosts possessing single (=1) and multiple properties (&gt;=2) revealed that the percentage of multiple-listing hosts increased from 44.6% of total Airbnb listings in 2021 to 52.2% in 2024, indicating that the proportion of multiple-listing hosts is growing to occupy more of the listings market. The bar chart below visualising the change in number of listings owned by multiple- and single-listing hosts over the past 4 years confirms a steady growth in the presence of multiple-listing hosts.</p>
<div id="0eddc577" class="cell" data-execution_count="5">
<div class="cell-output cell-output-stdout">
<pre><code>Data frame listings_2024 is 87,946 x 75
Data frame listings_2021 is 70,617 x 74
Data frame listings_2022 is 69,351 x 75
Data frame listings_2023 is 87,946 x 75
Data frame msoa_map is 983 x 13</code></pre>
</div>
</div>
<div id="a42669be" class="cell" data-execution_count="6">
<div class="cell-output cell-output-stdout">
<pre><code>Combined data frame is 315,860 x 76
Combined data frame is 315,860 x 15
Number of unique id is 128,095
Number of unique host id is 72,165</code></pre>
</div>
</div>
<div id="b5278f70" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">host_id</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">host_listings_count</th>
<th data-quarto-table-cell-role="th">category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010</td>
<td>2021</td>
<td>1</td>
<td>Single Property hosts</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>4775</td>
<td>2021</td>
<td>7</td>
<td>Multiple Properties hosts</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>4775</td>
<td>2022</td>
<td>7</td>
<td>Multiple Properties hosts</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4775</td>
<td>2023</td>
<td>6</td>
<td>Multiple Properties hosts</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4775</td>
<td>2024</td>
<td>6</td>
<td>Multiple Properties hosts</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">198747</td>
<td>535469107</td>
<td>2024</td>
<td>1</td>
<td>Single Property hosts</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">198748</td>
<td>535479813</td>
<td>2023</td>
<td>1</td>
<td>Single Property hosts</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">198749</td>
<td>535479813</td>
<td>2024</td>
<td>1</td>
<td>Single Property hosts</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">198750</td>
<td>535514014</td>
<td>2023</td>
<td>1</td>
<td>Single Property hosts</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">198751</td>
<td>535514014</td>
<td>2024</td>
<td>1</td>
<td>Single Property hosts</td>
</tr>
</tbody>
</table>

<p>198752 rows × 4 columns</p>
</div>
</div>
</div>
<div id="8953f923" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">listing_url</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">host_id</th>
<th data-quarto-table-cell-role="th">host_name</th>
<th data-quarto-table-cell-role="th">host_listings_count_x</th>
<th data-quarto-table-cell-role="th">host_total_listings_count</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">property_type</th>
<th data-quarto-table-cell-role="th">room_type</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">number_of_reviews</th>
<th data-quarto-table-cell-role="th">review_scores_rating</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">new_host_listings_count</th>
<th data-quarto-table-cell-role="th">category</th>
<th data-quarto-table-cell-role="th">geometry_point</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>92644</td>
<td>https://www.airbnb.com/rooms/92644</td>
<td>Rental unit in Earlsfield · ★4.57 · 1 bedroom ...</td>
<td>498201</td>
<td>Dee Dee</td>
<td>1.0</td>
<td>1.0</td>
<td>51.44201</td>
<td>-0.18739</td>
<td>Private room in rental unit</td>
<td>Private room</td>
<td>$42.00</td>
<td>216</td>
<td>4.57</td>
<td>2024</td>
<td>1</td>
<td>Single Property hosts</td>
<td>POINT (-0.18739 51.44201)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>93015</td>
<td>https://www.airbnb.com/rooms/93015</td>
<td>Rental unit in Hammersmith · ★4.82 · 2 bedroom...</td>
<td>499704</td>
<td>Sarah</td>
<td>1.0</td>
<td>2.0</td>
<td>51.49993</td>
<td>-0.21707</td>
<td>Entire rental unit</td>
<td>Entire home/apt</td>
<td>$175.00</td>
<td>38</td>
<td>4.82</td>
<td>2024</td>
<td>1</td>
<td>Single Property hosts</td>
<td>POINT (-0.21707 51.49993)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>13913</td>
<td>https://www.airbnb.com/rooms/13913</td>
<td>Rental unit in Islington · ★4.80 · 1 bedroom ·...</td>
<td>54730</td>
<td>Alina</td>
<td>3.0</td>
<td>4.0</td>
<td>51.56861</td>
<td>-0.11270</td>
<td>Private room in rental unit</td>
<td>Private room</td>
<td>$79.00</td>
<td>41</td>
<td>4.80</td>
<td>2024</td>
<td>2</td>
<td>Multiple Properties hosts</td>
<td>POINT (-0.1127 51.56861)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>15400</td>
<td>https://www.airbnb.com/rooms/15400</td>
<td>Rental unit in London · ★4.80 · 1 bedroom · 1 ...</td>
<td>60302</td>
<td>Philippa</td>
<td>1.0</td>
<td>12.0</td>
<td>51.48780</td>
<td>-0.16813</td>
<td>Entire rental unit</td>
<td>Entire home/apt</td>
<td>$150.00</td>
<td>94</td>
<td>4.80</td>
<td>2024</td>
<td>1</td>
<td>Single Property hosts</td>
<td>POINT (-0.16813 51.4878)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>93734</td>
<td>https://www.airbnb.com/rooms/93734</td>
<td>Condo in London · ★4.62 · 1 bedroom · 1 bed · ...</td>
<td>497514</td>
<td>William</td>
<td>1.0</td>
<td>1.0</td>
<td>51.47618</td>
<td>0.01442</td>
<td>Private room in condo</td>
<td>Private room</td>
<td>$46.00</td>
<td>180</td>
<td>4.62</td>
<td>2024</td>
<td>1</td>
<td>Single Property hosts</td>
<td>POINT (0.01442 51.47618)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="87963a16" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-10-output-1.png" width="837" height="529" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>year
2021    0.446139
2022    0.459200
2023    0.506731
2024    0.506731
Name: id, dtype: float64</code></pre>
</div>
</div>
<p>&lt; Figure 2 : Single- and Multi-property Hosts’ Listings from 2021 to 2024 &gt;</p>
<p>These trends in room and host types point towards the increasing commercialisation of Airbnb lets. More than bona fide home sharing, Airbnb appears to be a platform for commercial profit at the expense of local communities (Quattrone et al., 2016).</p>
</section>
<section id="drawing-on-your-previous-answers-and-supporting-your-response-with-evidence-e.g.-figures-maps-edaesda-and-simple-statistical-analysismodels-drawing-on-experience-from-e.g.-casa0007-how-could-the-insideairbnb-data-set-be-used-to-inform-the-regulation-of-short-term-lets-stl-in-london" class="level2">
<h2 class="anchored" data-anchor-id="drawing-on-your-previous-answers-and-supporting-your-response-with-evidence-e.g.-figures-maps-edaesda-and-simple-statistical-analysismodels-drawing-on-experience-from-e.g.-casa0007-how-could-the-insideairbnb-data-set-be-used-to-inform-the-regulation-of-short-term-lets-stl-in-london">7. Drawing on your previous answers, and supporting your response with evidence (<em>e.g.</em> figures, maps, EDA/ESDA, and simple statistical analysis/models drawing on experience from, e.g., CASA0007), how <em>could</em> the InsideAirbnb data set be used to inform the regulation of Short-Term Lets (STL) in London?</h2>
<div class="duedate">
<p>( 45 points; Answer due <strong>?var:assess.group-date</strong> )</p>
</div>
</section>
<section id="sustainable-authorship-tools" class="level2">
<h2 class="anchored" data-anchor-id="sustainable-authorship-tools">Sustainable Authorship Tools</h2>
<p>Using the Terminal in Docker, you compile the Quarto report using <code>quarto render &lt;group_submission_file&gt;.qmd</code>.</p>
<p>Your QMD file should automatically download your BibTeX and CLS files and any other required files. If this is done right after library loading then the entire report should output successfully.</p>
<p>Written in Markdown and generated from <a href="https://quarto.org/">Quarto</a>. Fonts used: <a href="https://fonts.google.com/specimen/Spectral">Spectral</a> (mainfont), <a href="https://fonts.google.com/specimen/Roboto">Roboto</a> (<span style="font-family:Sans-Serif;">sansfont</span>) and <a href="https://fonts.google.com/specimen/JetBrains%20Mono">JetBrains Mono</a> (<code>monofont</code>).</p>
</section>
<section id="references" class="level2 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-adamiak_2022" class="csl-entry" role="listitem">
Adamiak, C. (2022) <span>“Current state and development of <span>Airbnb</span> accommodation offer in 167 countries,”</span> <em>Current Issues in Tourism</em>, 25(19), pp. 3131–3149. doi: <a href="https://doi.org/10.1080/13683500.2019.1696758">10.1080/13683500.2019.1696758</a>.
</div>
<div id="ref-alsudais_2021" class="csl-entry" role="listitem">
Alsudais, A. (2021) <span>“Incorrect data in the widely used <span>Inside</span> <span>Airbnb</span> dataset,”</span> <em>Decision Support Systems</em>, 141, p. 113453. doi: <a href="https://doi.org/10.1016/j.dss.2020.113453">10.1016/j.dss.2020.113453</a>.
</div>
<div id="ref-crommelin_2018" class="csl-entry" role="listitem">
Crommelin, L. <em>et al.</em> (2018) <span>“Is <span>Airbnb</span> a <span>Sharing</span> <span>Economy</span> <span>Superstar</span>? <span>Evidence</span> from <span>Five</span> <span>Global</span> <span>Cities</span>,”</span> <em>Urban Policy and Research</em>, 36(4), pp. 429–444. doi: <a href="https://doi.org/10.1080/08111146.2018.1460722">10.1080/08111146.2018.1460722</a>.
</div>
<div id="ref-insideairbnb" class="csl-entry" role="listitem">
<span>“Inside airbnb”</span> (n.d.). Available at: <a href="http://insideairbnb.com">http://insideairbnb.com</a>.
</div>
<div id="ref-kohlmayer_2019" class="csl-entry" role="listitem">
Kohlmayer, F., Lautenschläger, R. and Prasser, F. (2019) <span>“Pseudonymization for research data collection: Is the juice worth the squeeze?”</span> <em>BMC Medical Informatics and Decision Making</em>, 19(1), p. 178. doi: <a href="https://doi.org/10.1186/s12911-019-0905-x">10.1186/s12911-019-0905-x</a>.
</div>
<div id="ref-krotov_2020" class="csl-entry" role="listitem">
Krotov, V., Johnson, L. and Silva, L. (2020) <span>“Tutorial: <span>Legality</span> and <span>Ethics</span> of <span>Web</span> <span>Scraping</span>,”</span> <em>Communications of the Association for Information Systems</em>, 47(1). doi: <a href="https://doi.org/10.17705/1CAIS.04724">10.17705/1CAIS.04724</a>.
</div>
<div id="ref-prentice_2023" class="csl-entry" role="listitem">
Prentice, C. and Pawlicz, A. (2023) <span>“Addressing data quality in <span>Airbnb</span> research,”</span> <em>International Journal of Contemporary Hospitality Management</em>, 36(3), pp. 812–832. doi: <a href="https://doi.org/10.1108/IJCHM-10-2022-1207">10.1108/IJCHM-10-2022-1207</a>.
</div>
<div id="ref-rocher_2019" class="csl-entry" role="listitem">
Rocher, L., Hendrickx, J. M. and Montjoye, Y.-A. de (2019) <span>“Estimating the success of re-identifications in incomplete datasets using generative models,”</span> <em>Nature Communications</em>, 10(1), p. 3069. doi: <a href="https://doi.org/10.1038/s41467-019-10933-3">10.1038/s41467-019-10933-3</a>.
</div>
<div id="ref-rosenblatt_2017" class="csl-entry" role="listitem">
Rosenblatt, J. (2017) <span>“Uber <span>Data</span>-<span>Scraping</span>, <span>Surveillance</span> <span>Detailed</span> by <span>Ex</span>-<span>Manager</span>,”</span> <em>Bloomberg.com</em>. Available at: <a href="https://www.bloomberg.com/news/articles/2017-12-15/uber-data-scraping-surveillance-detailed-in-ex-manager-s-letter">https://www.bloomberg.com/news/articles/2017-12-15/uber-data-scraping-surveillance-detailed-in-ex-manager-s-letter</a> (Accessed: December 5, 2024).
</div>
<div id="ref-slee_2016" class="csl-entry" role="listitem">
Slee, T. and Cox, M. (2016) <span>“How <span>Airbnb</span>’s <span>Data</span> hid the <span>Facts</span> in <span>New</span> <span>York</span> <span>City</span>,”</span> <em>InsideAirbnb</em>. Available at: <a href="https://insideairbnb.com/research/how-airbnb-hid-the-facts-in-nyc/">https://insideairbnb.com/research/how-airbnb-hid-the-facts-in-nyc/</a> (Accessed: December 5, 2024).
</div>
<div id="ref-wang_2024" class="csl-entry" role="listitem">
Wang, Y. <em>et al.</em> (2024) <span>“The challenges of measuring the short-term rental market: An analysis of open data on <span>Airbnb</span> activity,”</span> <em>Housing Studies</em>, 39(9), pp. 2260–2279. doi: <a href="https://doi.org/10.1080/02673037.2023.2176829">10.1080/02673037.2023.2176829</a>.
</div>
<div id="ref-zook_2017" class="csl-entry" role="listitem">
Zook, M. <em>et al.</em> (2017) <span>“Ten simple rules for responsible big data research,”</span> <em>PLOS Computational Biology</em>, 13(3), p. e1005399. doi: <a href="https://doi.org/10.1371/journal.pcbi.1005399">10.1371/journal.pcbi.1005399</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>